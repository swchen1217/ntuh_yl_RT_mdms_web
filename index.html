<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>醫療儀器管理系統</title>

    <!--  jQuery -->
    <script src="jquery-3.4.1.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <script src="bootstrap/js/bootstrap.js"></script>
    <!-- Popper.js -->
    <script src="popper.min.js"></script>
    <!-- jQuery-confirm -->
    <link rel="stylesheet" href="jquery-confirm-v3.3.4/jquery-confirm.min.css">
    <script src="jquery-confirm-v3.3.4/jquery-confirm.min.js"></script>
    <!-- jQuery-cookie -->
    <script src="jquery-cookie/jquery.cookie.js"></script>
    <!-- FontAwesome -->
    <link href="css/all.css" rel="stylesheet">
    <!-- w3 -->
    <script src="w3.js"></script>

    <!-- My CSS -->
    <link rel="stylesheet" href="main.css">
    <!-- My js -->
    <script src="alert.js"></script>
</head>
<body>
<div class="jumbotron text-center" style="margin-bottom:0;padding-top: 20px;padding-bottom: 20px;">
    <div class="container">
        <h1>NTUH.YL 醫療儀器管理系統</h1>
        <h4>NTUH.YL Medical Device Manage System</h4>
    </div>
</div>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="padding: 0px">
    <button class="navbar-toggler" data-toggle="collapse" data-target="#navbarToggler" style="margin-left: 16px">
        <span class="navbar-toggler-icon">
        </span>
    </button>
    <a class="navbar-brand" href="index.html" style="margin-right: 16px;margin-left: 16px">MDMS</a>

    <div class="collapse navbar-collapse" id="navbarToggler">
        <ul class="nav navbar-nav mr-auto">
            <li>
                <a class="nav-link" href="#UpdateStatus">現況登錄</a>
            </li>
            <li>
                <a class="nav-link" href="#InquireStatus">狀態查詢</a>
            </li>
            <li>
                <a class="nav-link" href="#Log">歷史紀錄</a>
            </li>
            <li>
                <a class="nav-link" href="#Repair">維修項目</a>
            </li>
            <li>
                <a class="nav-link" href="#MaintenanceCheck">儀器保養</a>
            </li>
            <li>
                <a class="nav-link" href="#DeviceManage">設備管理</a>
            </li>
            <li>
                <a class="nav-link" href="#UserManage">帳號管理</a>
            </li>
            <li>
                <a class="nav-link" href="#ChangePw">更改密碼</a>
            </li>
        </ul>
        <ul class="nav navbar-nav ml-auto">
            <li>
                <a class="nav-link" onclick="location.replace('login.html')">登入/登出</a>
            </li>
        </ul>
    </div>
</nav>
<div id="middle">
    <div class="container">
        <div w3-include-html="alert.html"></div>
        <div id="Content_Dashboard">1</div>
        <div id="Content_Enter_status">2</div>
        <div id="Content_Inquire_status">3</div>
        <div id="Content_Log">4</div>
        <div id="Content_Fix">5</div>
        <div id="Content_Maintenance_check">6</div>
        <div id="Content_Device_manage">7</div>
        <div id="Content_User_manage">8</div>
        <div id="Content_Change_pw">9</div>
    </div>
</div>
<script>
    $(document).ready(function () {
        OnHashchangeListener();
        $(".nav a").on("click", function () {
            $(".nav").find(".active").removeClass("active");
            $(this).parent().addClass("active");
            $("#navbarToggler").collapse('hide');
        });

        window.addEventListener('hashchange', OnHashchangeListener);
    });

    function OnHashchangeListener() {
        var hash = location.hash;
        console.log(hash);
        if (hash != '') {
            $(".nav").find(".active").removeClass("active");
            $("a[href='" + hash + "']").parent().addClass('active');
        }
        change_pages(hash);
        HideAlert();
        if (hash == '' && login_check()) {

        }
        if (hash == '#UpdateStatus' && login_check()) {

        }
        if (hash == '#InquireStatus' && login_check()) {

        }
        if (hash == '#Log' && login_check()) {

        }
        if (hash == '#Repair' && login_check()) {

        }
        if (hash == '#MaintenanceCheck' && login_check()) {

        }
        if (hash == '#DeviceManage' && login_check()) {

        }
        if (hash == '#UserManage' && login_check()) {

        }
        if (hash == '#ChangePw') {
            $('#alert-primary').show();
            $('#alert-success').show();
            $('#alert-danger').show();
            $('#alert-warning').show();
            $('#alert-info').show();
        }
    }

    function login_check() {
        if ($.cookie('LoginInfoAcc')) {
            return true;
        } else if (location.hash == '') {
            $('#alert-warning-in').html("請先<a href='login.html' class='alert-link'>登入</a>");
            $('#alert-warning').show();
        } else {
            $('#alert-danger-in').text('尚未登入!!');
            $('#alert-danger').show();
            return false;
        }
    }

    function change_pages(hash){
        // TODO
        $("div[id^='Content_']").hide();
        if(hash='')
            $('#Content_Dashboard').show();
        if(hash='#UpdateStatus')
            $('#Content_Enter_status').show();
        if(hash='#InquireStatus')
            $('#Content_Inquire_status').show();
        if(hash='#Log')
            $('#Content_Log').show();
        if(hash='#Repair')
            $('#Content_Fix').show();
        if(hash='#MaintenanceCheck')
            $('#Content_Maintenance_check').show();
        if(hash='#DeviceManage')
            $('#Content_Device_manage').show();
        if(hash='#UserManage')
            $('#Content_User_manage').show();
        if(hash='#ChangePw')
            $('#Content_Change_pw').show();
    }

    w3.includeHTML();
</script>
</body>
</html>